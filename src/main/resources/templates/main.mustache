<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>Title</title>
    <style>
     html {
         font-family: 'Space Grotesk', sans-serif;
         margin: 0;
         height: 100%;
     }
     body {
         font-family: 'Inter' ,sans-serif;
         margin: 0;
         padding: 20px;
     }

     .header {
         width: 100%;
         background-color: #ffffff;
         border-top: 1px solid #000000;
         border-bottom: 1px solid #000000;
         box-sizing: border-box;
     }

    .main-container {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 40px;
        height: calc(100vh - 60px);
        box-sizing: border-box;
    }

    .left-section {
        min-width: 380px;
        background: #ffffff;
        /*padding: 32px 16px;*/
        color: #222;
    }


    .right-section {
      min-width: 300px;
      background-color: #323232;
      color: #ffffff;
      padding: 32px 16px;
    }

     .card {
         margin-bottom: 20px;
         position: relative;
         background: white;
         /*max-width: 250px;*/

     }

     .card-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 16px;
     }

     .place, .congestion, .recomnd_score, .period {
         font-size: 18px;
         margin: 4px 0;
         font-weight: 400;
     }

     .cards-grid {
         display: grid;
         grid-template-columns: repeat(3, 1fr);
         gap: 30px;
         margin-top: 20px;
     }

     .badge {
         display: inline-block;
         padding: 4px 10px;
         border-radius: 10px;
         color: white;
         font-weight: bold;
         font-size: 7px;
     }
     .green{background-color: green}
     .orange{background-color: darkorange}
     .yellow{background-color: yellow; color: black;}
     .red{background-color: red}
     .gray{background-color: gray}

    .view-btn {
        background: none;
        border: 1px solid #000;
        padding: 3px 5px;
        border-radius: 20px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s;
        text-transform: lowercase;
        text-decoration: none;
        color: #000;
        display: inline-block;
    }

    .view-btn:hover {
            background: #000;
            color: white;
        }

    .card-image {
        width: 100%;
        height: auto;
        margin-bottom: 20px;

        }
    .card-details {
        border-top: 1px solid #000;
        padding-top: 5px;
    }

     .detail-item {
         border-bottom: 1px solid #000;
         width: 100%;
     }

     .exhibition-list{
         border-top: 1px solid #000000;
        }

    .exhibition-item {
        display: flex;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #000000;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .exhibition-item:hover {
        background-color: #f5f5f5;
    }

    .search-container input:focus {
         outline: none;
         border-color: #000;
    }

    </style>
</head>

<body>

<!--헤더-->
<div class="header">
    <span style="font-family: 'Space Grotesk', sans-serif; ">
        <h1>Do U Like Gonna Exhibition?</h1>
        <br>
		<br>
		<br>
    </span>

</div>

<!--본문-->
<div class="main-container">

    <!-- 왼쪽 섹션 -->
<div class="left-section">
    <div>
        <h2>Selected Displays Only For U</h2>
        <div style="display: flex; align-items: center;">
    </div>

        <!--추천 전시 카드-->
        <div class="cards-grid">
        {{#cards}}
            <div class="card">
                <div class="card-header">
                <h5 style=" margin: 0; font-size: 22px; ">{{title}}</h5>
                    <span class= "badge {{#isGreen}}green{{/isGreen}}{{#isOrange}}orange{{/isOrange}} {{#isYellow}}yellow{{/isYellow}}{{#isRed}}red{{/isRed}}{{#isGray}}gray{{/isGray}}"></span>
                <a href="/detail?title={{title}}" class="view-btn">VIEW</a>
                </div>
                <img src = "{{imageObject}}" class="card-image" loading="lazy"> <!--! 문제 구역 !-->
                <div class="card-details"></div>
                <div class="detail-item">
                    <h5 class="place">WHERE {{agencyNm}}</h5></div>
<!--                <div class="detail-item">-->
<!--&lt;!&ndash;                    <h5 class="congestion">Congestion {{congestionNm}}</h5> &ndash;&gt;-->
<!--                </div>-->
                <div class="detail-item">
                 <h5 class="recomnd_score"> i recommend this by {{recommendScore}}</h5> </div>
                <div class="detail-item">
                    <h5 class="period">{{period}}</h5></div>
            </div>
        {{/cards}}
        </div>
        </div>


    <!--전시 전체 리스트 들어갈 자리!-->
        <div class="all-exhibition-list" style="margin-top: 40px;">
            <h2>current exhibitions list</h2>

            <!--검색창 자리-->  <!--엔터로 처리하기- 노 버튼-->
            <div class="seach-container" style="margin-bottom: 20px;">
                <div style="position: relative;">
                    <input type="text" class="seach-box" placeholder="search exhibitions" STYLE="width: 100%; padding: 10px; border: 1px solid #000;">
                </div>
            </div>

            <!--전시 리스트 자리-->
            <div class="exhibition-list">
                {{#allExhibitions}}
                    <div class="exhibition-item">
                    <span class="title-info" style="font-size: 15px; flex: 1">{{title}}</span>
                    <span class="period-info" style="font-size: 15px; min-width: 120px; margin-right: 15px">{{period}}</span>

                    </div>
                {{/allExhibitions}}
            </div>
    </div>

</div>


    <!-- 오른쪽 섹션: 사용자 취향 분석 -->
    <div class="right-section" style="display: grid; background: black; color: #fff;">
        <div class="sub-title">
            <h5 style="font-family: 'Inter',sans-serif;">What are your tastes?</h5>
        </div>

 <!--{name} 이름 인풋 넣기????-->
    <div>
        <span class="test" style=" font-family: 'Intel', sans-serif; color: darkgray;">
            <h5>"h i sera h i sera h i sera h i sera h i sera h i serah i sera h i sera h i
                sera h i sera h i sera h i serah "jibegagosipeo jinjjaru neomu jollyeo" i sera h i sera h i sera h i sera h i sera
                h i sera h i sera h i sera h i sera h i sera h i sera h i sera "</h5>
              </span>
    </div>

        <!--테스트용 질문-->
        <div class="question0"> @...I'M TESTING...@ muyaho? </div>
        <div class="answer0">
            <div class="form-check">
                <input class="form-check-input" type="checkbox"  id="ch0">
                <label class="form-check-label" for="flexCheckDefault">
                    ABCDEFGHIJKLMNOP
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ch1">
                <label class="form-check-label" for="flexCheckDefault">
                    12334567890
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ch2" >
                <label class="form-check-label" for="flexCheckChecked">
                    I JUST WANNA GO HOME
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ch3" >
                <label class="form-check-label" for="flexCheckDefault">
                    20250829
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ch4" checked>
                <label class="form-check-label" for="flexCheckDefault">
                    TODAY IS FRIDAY </label>
            </div>
        </div>


        <!--첫번째 질문-->
        <div class="question1"> 1. Are there any museums you're interested in? </div>
        <div class="answer1">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="서울" id="서울">
            <label class="form-check-label" for="서울">
                서울
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="과천" value="과천" >
            <label class="form-check-label" for="과천">
               과천
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="덕수궁" value="덕수궁" >
            <label class="form-check-label" for="덕수궁">
                덕수궁
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="청주" value="청주" checked>
            <label class="form-check-label" for="청주">
                청주
            </label>
        </div>
</div>

        <!--두번째 질문-->
        <div class="question2"> 2. When is the favorite time to visit the exhibition? </div>

        <div class="ask2" style="padding-top: 10px;">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="Morning" id="Morning">
            <label class="form-check-label" for="Morning">Morning</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="Afternoon" value="Afternoon">
            <label class="form-check-label" for="Afternoon">Afternoon</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="Evening" value="Evening" checked>
            <label class="form-check-label" for="Evening">Evening</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="Any" value="Any" >
            <label class="form-check-label" for="Any">Any Time</label>
        </div>
    </div>

        <!--세번째 질문-->
        <div class="question3"> 3. What kind of admission do you prefer? </div>
        <div class="ask3" style="padding-top: 10px;">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="유료" id="유료">
                <label class="form-check-label" for="유료"> 유료 </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="무료" value="무료" checked>
                <label class="form-check-label" for="무료">무료</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="상관 없음" value="상관 없음" >
                <label class="form-check-label" for="상관 없음">상관 없음</label>
            </div>
        </div>

        <button class="complete_input">IM READY!!!</button>

    </div>

</div>


</div>

</body>

<!--localStrage 캐싱-->
<script>
    const cacheKey = 'displayCardsCache';
    const cacheTTL = 5 * 60 * 1000; // 5분

    async function fetchDisplayCards() {
      const cached = localStorage.getItem(cacheKey);
      if (cached) {
        const { timestamp, data } = JSON.parse(cached);
        if (Date.now() - timestamp < cacheTTL) {
          renderCards(data); // 캐시 데이터로 화면 렌더링 함수 호출
          return;
        }
      }
      // 캐시 없거나 만료 시 서버 API 호출
      try {
        const res = await fetch('/api/cards');
        const data = await res.json();
        localStorage.setItem(cacheKey, JSON.stringify({ timestamp: Date.now(), data }));
        renderCards(data);
      } catch (e) {
        console.error('API 호출 실패', e);
      }
    }

    // 실제 카드를 화면에 렌더링하는 함수 (Mustache 탬플릿 엔진이 있다면 사용)
    function renderCards(cards) {
      // 템플릿 라이브러리 이용해 #cards 부분에 렌더링 로직 적용
      // 예: Mustache.render(template, { cards })
      // 또는 DOM 직접 조작으로 화면 그리기
      console.log(cards); // 디버그용
    }

    // 페이지 로드 시 실행
    window.addEventListener('DOMContentLoaded', fetchDisplayCards);
</script>

</html>